<script>
  (function() {
      var clickCode = "{{settings.clickCode}}";
      var advertiserCode = "{{settings.advertiserCode}}";
      var key = "{{settings.key}}";
      var cookieScriptName = "{{settings.cookieScriptName}}";
      var cookieScriptDomain = "{{settings.cookieScriptDomain}}";
      var iframeDomain = "{{settings.iframeDomain}}";
      var taxCode = "{{settings.taxCode}}" ?? 0;

      if (!clickCode || !advertiserCode || !key || !cookieScriptName) {
        console.error('Warning: Missing required field for Profitshare. Please configure it in the apps admin.');
        return
      }
      if (!cookieScriptDomain || !iframeDomain) {
        console.warn('Warning: Missing cookieScriptDomain or iframeDomain. Default values for Romania will be applied.');
      }
      
      window.__profitshare = {
        clickCode: clickCode,
        advertiserCode: advertiserCode,
        key: key,
        cookieScriptDomain: cookieScriptDomain,
        iframeDomain: iframeDomain,
        taxCode: taxCode,
        _ps_tg: {}
      };
    })()
</script>

<script>
  let item = JSON.parse( window.localStorage.getItem('_ps_tgt'));
  if(item){
    var _ps_tgt = {
    a:  item.a,
    pc: item.pc,
    pp: item.pp,
    cc: item.cc,
    bc: item.bc
    }
  }
   
  let cookieScriptDomain = "{{ settings.cookieScriptDomain }}" ?? "t.profitshare.ro";
  var s;
      s = document.createElement('script');
      s.type="text/javascript";
      s.async = true;
      s.src = `https://${cookieScriptDomain}/tgt/js`;
  document.head.appendChild(s);
</script>

<script>
  var domain = "{{ settings.cookieScriptDomain }}" ?? "t.profitshare.ro";
  var s;
      s = document.createElement('script');
      s.type="text/javascript";
      s.async = true;
      s.src = `https://${domain}/files_shared/tr/{{settings.cookieScriptName}}.js`;
  document.head.appendChild(s);
</script>

